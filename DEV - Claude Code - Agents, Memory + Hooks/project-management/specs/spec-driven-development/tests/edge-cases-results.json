{
  "total_tests": 35,
  "should_bypass": 26,
  "should_enhance": 9,
  "actually_enhanced": 35,
  "mismatches": 26,
  "bypass_reasons": {
    "too_long": 2,
    "bypass_pattern_3": 2,
    "bypass_pattern_4": 6,
    "simple_query": 5,
    "bypass_pattern_1": 3,
    "bypass_prefix": 5,
    "bypass_pattern_2": 3
  },
  "test_results": [
    {
      "test_name": "very_long_prompt_11k",
      "prompt": "Please help me refactor the authentication system to improve security and performance. Please help m...",
      "prompt_length": 11000,
      "should_bypass": true,
      "bypass_reason": "too_long: >10,000 chars",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "code_block_only",
      "prompt": "```js\nfunction test() { return true; }\n```",
      "prompt_length": 42,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_3: ^```[\\s\\S]+```$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "mixed_content_code",
      "prompt": "Here's my code: ```js\nconst x = 1;\n``` can you fix it?",
      "prompt_length": 54,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "single_word_yes",
      "prompt": "yes",
      "prompt_length": 3,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_4: ^(yes|no|ok|cancel|continue|stop)$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "special_chars",
      "prompt": "!@#$%^&*()",
      "prompt_length": 10,
      "should_bypass": true,
      "bypass_reason": "simple_query: <3 words, no question",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "empty_string",
      "prompt": "",
      "prompt_length": 0,
      "should_bypass": true,
      "bypass_reason": "simple_query: <3 words, no question",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "whitespace_only",
      "prompt": "   \n\t  ",
      "prompt_length": 7,
      "should_bypass": true,
      "bypass_reason": "simple_query: <3 words, no question",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "command_prefix",
      "prompt": "/memory search patterns",
      "prompt_length": 23,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_1: ^/\\w+\\s+",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "bypass_raw",
      "prompt": "raw: just give me the code",
      "prompt_length": 26,
      "should_bypass": true,
      "bypass_reason": "bypass_prefix: raw:",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "bypass_exact",
      "prompt": "exact: run this command",
      "prompt_length": 23,
      "should_bypass": true,
      "bypass_reason": "bypass_prefix: exact:",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "bypass_no_enhance",
      "prompt": "no-enhance: give me raw output",
      "prompt_length": 30,
      "should_bypass": true,
      "bypass_reason": "bypass_prefix: no-enhance:",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "two_words",
      "prompt": "help me",
      "prompt_length": 7,
      "should_bypass": true,
      "bypass_reason": "simple_query: <3 words, no question",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "question_mark_only",
      "prompt": "?",
      "prompt_length": 1,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "multiple_code_blocks",
      "prompt": "```python\nprint('hello')\n```\n\n```js\nconsole.log('world')\n```",
      "prompt_length": 60,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_3: ^```[\\s\\S]+```$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "unicode_chars",
      "prompt": "\u5e2e\u6211\u5199\u4ee3\u7801 \ud83d\ude80",
      "prompt_length": 7,
      "should_bypass": true,
      "bypass_reason": "simple_query: <3 words, no question",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "short_with_question",
      "prompt": "why?",
      "prompt_length": 4,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "exactly_10k",
      "prompt": "Please help me refactor the authentication system to improve security and performance. Please help m...",
      "prompt_length": 10000,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "just_over_10k",
      "prompt": "Please help me refactor the authentication system to improve security and performance. Please help m...",
      "prompt_length": 10001,
      "should_bypass": true,
      "bypass_reason": "too_long: >10,000 chars",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "confirm_ok",
      "prompt": "ok",
      "prompt_length": 2,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_4: ^(yes|no|ok|cancel|continue|stop)$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "confirm_cancel",
      "prompt": "cancel",
      "prompt_length": 6,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_4: ^(yes|no|ok|cancel|continue|stop)$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "confirm_continue",
      "prompt": "continue",
      "prompt_length": 8,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_4: ^(yes|no|ok|cancel|continue|stop)$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "confirm_stop",
      "prompt": "stop",
      "prompt_length": 4,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_4: ^(yes|no|ok|cancel|continue|stop)$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "confirm_no",
      "prompt": "no",
      "prompt_length": 2,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_4: ^(yes|no|ok|cancel|continue|stop)$",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "error_prefix",
      "prompt": "error: file not found",
      "prompt_length": 21,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_2: ^(error|warning|info):\\s*",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "warning_prefix",
      "prompt": "warning: deprecated function",
      "prompt_length": 28,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_2: ^(error|warning|info):\\s*",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "info_prefix",
      "prompt": "info: process completed",
      "prompt_length": 23,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_2: ^(error|warning|info):\\s*",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "/save_command",
      "prompt": "/save new test-session",
      "prompt_length": 22,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_1: ^/\\w+\\s+",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "/logic_command",
      "prompt": "/logic help",
      "prompt_length": 11,
      "should_bypass": true,
      "bypass_reason": "bypass_pattern_1: ^/\\w+\\s+",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "three_words_no_q",
      "prompt": "help me please",
      "prompt_length": 14,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "three_words_with_q",
      "prompt": "help me please?",
      "prompt_length": 15,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "two_words_with_q",
      "prompt": "help me?",
      "prompt_length": 8,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "mixed_case_raw",
      "prompt": "RaW: don't enhance",
      "prompt_length": 18,
      "should_bypass": true,
      "bypass_reason": "bypass_prefix: raw:",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "mixed_case_exact",
      "prompt": "EXACT: just do it",
      "prompt_length": 17,
      "should_bypass": true,
      "bypass_reason": "bypass_prefix: exact:",
      "actually_enhanced": true,
      "mismatch": true
    },
    {
      "test_name": "code_with_text_before",
      "prompt": "Look at this:\n```js\ncode\n```",
      "prompt_length": 28,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    },
    {
      "test_name": "code_with_text_after",
      "prompt": "```js\ncode\n```\nWhat do you think?",
      "prompt_length": 33,
      "should_bypass": false,
      "bypass_reason": "no_bypass_condition_met",
      "actually_enhanced": true,
      "mismatch": false
    }
  ]
}